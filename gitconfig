# include this file in your ~/.gitconfig with:
# [include]
#   path = /usr/local/cfg/gitconfig

[alias]
    br  = branch
    co  = checkout                              # Checkout a branch
    cob = checkout -b                           # Checkout a new not yet existing branch
    cp  = cherry-pick                           # Cherry pick change
    f   = fetch                                 # Fetch from a repository
    c   = commit                                # Commit you changes
    p   = push                                  # Push you changes to a remote
    ba  = branch -a                             # List both remote-tracking branches and local branches.
    dc  = diff --cached                         # Display the staged changes
    ca  = commit --amend --date=now             # Ammend commit with new date
    aa  = add --all                             # Add all changes from anywhere
    can  = commit --amend --no-edit             # Ammend commit and dont edit commit message
    rb  = rebase                                # Rebase
    last = log -1                               # Log last commit
    st = status -sb
    diffs = diff --staged
    rmc = rm -r --cached
    capf = ! git add . && git commit --amend --no-edit && git push -f

    lp = log --pretty=oneline --abbrev-commit
    ll = log --pretty=oneline --abbrev-commit -5

    tree = log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset)%C(bold yellow)%d%C(reset)%n''          %C(white)%s%C(reset) %C(dim white)- %an%C(reset)'
    rlog = "!f() { c1=$1; c2=$2; shift 2; git log --reverse --ancestry-path ${c1}^..${c2} $@; }; f"

    cb  = ! git branch | fzf | xargs git checkout

    recommit = commit --reedit-message=HEAD --date=now
    rc = commit --reedit-message=HEAD --date=now

    rmgone = "! sh /usr/local/cfg/scripts/git_rm_gone"

    mdiff = difftool -t meld --dir-diff

    ph = push origin HEAD

    pgr = "!f() {\
             [[ -z $1 ]] && { echo "Specify branch"; exit -1; };\
             [[ -z $2 ]] && { echo "Specify topic"; exit -1; };\
             [[ ! $2 =~ "REV|WIP" ]] && { echo "Invalid topic [$2]"; exit -1; };\
             git push gerrit HEAD:refs/for/$1%topic=$2;\
           }; f"

[pull]
    rebase = true

[core]
    editor = vim
    excludesfile = /usr/local/cfg/gitignore

[merge]
    conflictstyle = diff3
    tool = code

